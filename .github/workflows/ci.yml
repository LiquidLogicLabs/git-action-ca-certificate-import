name: CI

on:
  push:
    branches: ['**']
  pull_request:
    branches: ['**']
  workflow_call:  # Allow CI to be called by release workflow
  workflow_dispatch:  # Allow manual triggering

permissions:
  contents: read
  pull-requests: read

jobs:
  test:
    # test.yml has its own condition and only supports workflow_call and workflow_dispatch
    # When ci.yml is triggered by push/PR/workflow_call, calling test.yml via workflow_call will work
    # test.yml will handle the condition checking internally
    uses: ./.github/workflows/test.yml
    # test.yml runs: all tests for composite action